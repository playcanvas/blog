"use strict";(self.webpackChunk_playcanvas_blog=self.webpackChunk_playcanvas_blog||[]).push([[28680],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var i=t(96540);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}},35757:e=>{e.exports=JSON.parse('{"permalink":"/transitioning-to-the-new-render-component-and-fill-mode-api","editUrl":"https://github.com/playcanvas/blog/tree/main/blog/2021-07-05-transitioning-to-the-new-render-component-and-fill-mode-api.md","source":"@site/blog/2021-07-05-transitioning-to-the-new-render-component-and-fill-mode-api.md","title":"Transitioning to the New Render Component and Fill Mode API","description":"Hi everyone!","date":"2021-07-05T00:00:00.000Z","tags":[{"inline":true,"label":"editor","permalink":"/tags/editor"},{"inline":true,"label":"engine","permalink":"/tags/engine"}],"readingTime":4.66,"hasTruncateMarker":true,"authors":[{"name":"Steven Yau","title":"Partner Relations Manager","page":{"permalink":"/authors/steven"},"socials":{"x":"https://x.com/yaustar","linkedin":"https://www.linkedin.com/in/stevenyau/","github":"https://github.com/yaustar"},"imageURL":"https://github.com/yaustar.png","key":"steven"}],"frontMatter":{"authors":"steven","slug":"transitioning-to-the-new-render-component-and-fill-mode-api","title":"Transitioning to the New Render Component and Fill Mode API","tags":["editor","engine"]},"unlisted":false,"prevItem":{"title":"Learn the PlayCanvas API with the Engine Examples Browser","permalink":"/learn-the-playcanvas-api-with-the-engine-examples-browser"},"nextItem":{"title":"Introducing the Anim State Graph","permalink":"/introducing-the-anim-state-graph"}}')},51853:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/editor-import-hierarchy-preview-ee84fdfb5c984d6c211a25d92c52350b.jpg"},73224:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>h});var i=t(35757),a=t(74848),o=t(28453);const s={authors:"steven",slug:"transitioning-to-the-new-render-component-and-fill-mode-api",title:"Transitioning to the New Render Component and Fill Mode API",tags:["editor","engine"]},l=void 0,r={authorsImageUrls:[void 0]},h=[{value:"Moving from Model Component model import pipeline to new Render Component",id:"moving-from-model-component-model-import-pipeline-to-new-render-component",level:3},{value:"Breaking change to PlayCanvas Fill Mode API",id:"breaking-change-to-playcanvas-fill-mode-api",level:3},{value:"Questions and Feedback",id:"questions-and-feedback",level:3}];function d(e){const n={a:"a",code:"code",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Hi everyone!"}),"\n",(0,a.jsx)(n.p,{children:"This is a different blog post to what we normally do but with some big changes coming soon, we wanted to give context and advance notice of said changes and more importantly, how they may affect you across the PlayCanvas platform."}),"\n",(0,a.jsx)(n.h3,{id:"moving-from-model-component-model-import-pipeline-to-new-render-component",children:"Moving from Model Component model import pipeline to new Render Component"}),"\n",(0,a.jsxs)(n.p,{children:["As part of the work to enable the ",(0,a.jsx)(n.a,{href:"https://forum.playcanvas.com/t/importing-models-with-hierarchy-is-now-in-soft-launch/20304",children:"import of a model\u2019s hierarchy into the scene"}),", we have introduced Render Asset and Render Component as new features of the Engine and Editor."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Import Hierarchy Preview",src:t(51853).A+"",width:"2068",height:"1164"})}),"\n",(0,a.jsx)(n.p,{children:"Going forward, this will be the default way to render imported models and gives developers greater flexibility in manipulating mesh instances in the model directly in the Editor. For example, with the new pipeline you can import a house FBX model and only use the door mesh instance in the scene instead of the whole model."}),"\n",(0,a.jsx)(n.p,{children:"However, please note that while the Model Component is compatible with both the Animation and Anim (State Graph) Component, the Render Component/Import Hierarchy feature is only compatible with the Anim (State Graph) Component."}),"\n",(0,a.jsx)(n.p,{children:"(More details will be shared in an upcoming announcement, stay tuned for that!)"}),"\n",(0,a.jsxs)(n.p,{children:["For existing projects using the Model Component, please do not worry. ",(0,a.jsx)(n.strong,{children:"None of the existing functionality is being removed"})," and you will not be forced to update projects to the new pipeline for continued development. Although no new features will be added to the Model Component, the PlayCanvas team will continue to fix bugs with the existing pipeline."]}),"\n",(0,a.jsx)(n.p,{children:"You can even mix both pipelines in the same project if you wish to take advantage of the features in the new pipeline in an existing project. However, please bear in mind that this can add complexity to the project code."}),"\n",(0,a.jsx)(n.p,{children:"The expected changes over the upcoming months are as follows:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Add/Rename a Project Setting to switch between the two mesh import pipelines (Currently, this is the \u2018Import Hierarchy\u2019 setting)."}),"\n",(0,a.jsx)(n.li,{children:"Newly created projects will default to using the Render Component pipeline."}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://developer.playcanvas.com",children:"developer.playcanvas.com"})," tutorials will be updated to use Render Component (",(0,a.jsx)(n.a,{href:"https://playcanvas.github.io",children:"playcanvas.github.io"})," engine examples have already been updated)."]}),"\n",(0,a.jsx)(n.li,{children:"The template projects (Blank Project, Model Viewer Starter Kit, VR Starter Kit) will be updated to use Render Component."}),"\n",(0,a.jsx)(n.li,{children:"User Manual updates and mitigation steps from using the Model Component to Render Component pipelines."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"breaking-change-to-playcanvas-fill-mode-api",children:"Breaking change to PlayCanvas Fill Mode API"}),"\n",(0,a.jsx)(n.p,{children:"We want to make the PlayCanvas engine as flexible as it can be for the widest range of use cases for web developers. To do so, we occasionally have to break existing APIs that may have made sense when they were first introduced, but not today."}),"\n",(0,a.jsxs)(n.p,{children:["One such API is the Fill Mode related functions on ",(0,a.jsx)(n.code,{children:"pc.Application"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/playcanvas/engine/blob/64668d98b6d8cd3ecba6ecae937f1ce50fed9707/src/framework/application.js#L1376",children:(0,a.jsx)(n.code,{children:"application.resizeCanvas"})})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/playcanvas/engine/blob/64668d98b6d8cd3ecba6ecae937f1ce50fed9707/src/framework/application.js#L676",children:(0,a.jsx)(n.code,{children:"application.fillMode"})})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/playcanvas/engine/blob/64668d98b6d8cd3ecba6ecae937f1ce50fed9707/src/framework/application.js#L1313",children:(0,a.jsx)(n.code,{children:"application.setCanvasFillMode"})})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"These functions affect the canvas element size in the DOM as it was long assumed that apps made with PlayCanvas are either be iframed or fullscreen/full document apps."}),"\n",(0,a.jsx)(n.p,{children:"However, there has been more requests about having more control of the canvas element rather than using iframes. The main reason is that it\u2019s easier to communicate between the page and the PlayCanvas app without having to deal with iframe messaging."}),"\n",(0,a.jsx)(n.p,{children:"Some examples:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://forum.playcanvas.com/t/a-complete-playcanvas-scene-inside-div-tags/18461",children:"Forum: A Complete PlayCanvas scene inside a div"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://forum.playcanvas.com/t/solved-playcanvas-within-a-div/10492",children:"Forum: PlayCanvas within a div"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://forum.playcanvas.com/t/embedding-playcanvas-into-a-webpage-without-iframe/17246",children:"Forum: Embedding PlayCanvas into a webpage without iframe"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Currently, there is no way for an end user to have full control of the canvas without patching the engine."}),"\n",(0,a.jsx)(n.p,{children:"Also, from an architecture point of view, the Engine shouldn\u2019t handle the size or position of the element that it is rendering in. The responsibility should be on the web document and how it wants to layout the elements on the page (e.g through stylesheets)."}),"\n",(0,a.jsx)(n.p,{children:"These changes will affect you directly if you are:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"An engine only user as the HTML boilerplate will handle the resizing and positioning of the canvas. We will provide examples in the examples folder."}),"\n",(0,a.jsx)(n.li,{children:"Any developer that changes the fill mode or resizes the Canvas at runtime. Some developers do this to handle landscape and portrait mode more effectively."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"The current plan is deprecate these functions and move them to globally accessible functions on the page on the PlayCanvas Editor environment with as little (if any) downtime for projects or developers. At worst, you should only get a few warnings in the console log regarding deprecated function use."}),"\n",(0,a.jsx)(n.p,{children:"The steps will be as a gradual rollout:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Add globally accessible JS functions in the Editor and publish HTML templates to replace the fill mode functions from the Engine."}),"\n",(0,a.jsx)(n.li,{children:"Change the PlayCanvas Editor and published build templates to patch the Engine functions to call the global functions above with warnings that they should use the global functions instead."}),"\n",(0,a.jsx)(n.li,{children:"Update the User Manual to document these global functions."}),"\n",(0,a.jsx)(n.li,{children:"Deprecate the affected engine functions with warnings and reference the User Manual page."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"questions-and-feedback",children:"Questions and Feedback"}),"\n",(0,a.jsxs)(n.p,{children:["If there are any questions or areas that you would like to be made more clear, please post in the ",(0,a.jsx)(n.a,{href:"https://forum.playcanvas.com/",children:"forums"})," and the PlayCanvas team will be there to answer."]}),"\n",(0,a.jsx)(n.p,{children:"The PlayCanvas team are appreciative of your patience and continued support as we go through this transition!"})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);