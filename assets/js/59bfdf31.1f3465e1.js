"use strict";(self.webpackChunk_playcanvas_blog=self.webpackChunk_playcanvas_blog||[]).push([[36035],{355:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>u});var n=r(7170),a=r(74848),s=r(28453),i=r(89487);const o={authors:"mark",slug:"introducing-esm-scripts-in-playcanvas",title:"Introducing ESM Scripts in PlayCanvas",tags:["esm","modules","editor","developer"]},l=void 0,c={authorsImageUrls:[void 0]},u=[{value:"Why use ESM Scripts?",id:"why-use-esm-scripts",level:2},{value:"What it looks like",id:"what-it-looks-like",level:2},{value:"Real benefits for real projects",id:"real-benefits-for-real-projects",level:2},{value:"Seamless integration without disruption",id:"seamless-integration-without-disruption",level:2},{value:"Try It Today",id:"try-it-today",level:2}];function d(e){const t={a:"a",br:"br",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:(0,a.jsxs)(t.strong,{children:["We\u2019re excited to announce a major step forward for PlayCanvas: ",(0,a.jsx)(t.strong,{children:"ESM Scripts are now supported"})," \u2014 and officially the recommended way to write scripts in your PlayCanvas projects."]})}),"\n",(0,a.jsxs)(t.p,{children:["Back in 2016, we introduced what we now call ",(0,a.jsx)(t.a,{href:"https://blog.playcanvas.com/playcanvas-scripts-2-0/",children:"Classic Scripts"}),". At the time, this represented the state of the art in JavaScript. But things have evolved rapidly since then, and developers today expect modern tooling, clearer patterns, and better integration with the broader JavaScript ecosystem."]}),"\n",(0,a.jsx)(t.p,{children:"If you\u2019ve ever struggled with managing classic scripts, wondered why your auto-complete didn\u2019t work, or wished you could reuse code across projects more easily \u2014 this is for you."}),"\n",(0,a.jsx)(t.p,{children:"ESM (ECMAScript Modules) brings modern JavaScript development to the heart of PlayCanvas. It\u2019s faster to get started, easier to scale your project, and way more fun to work with. No more hidden globals. No more messy script loading order. Just well-structured, maintainable, and modular code \u2014 exactly how modern web development should be."}),"\n",(0,a.jsx)(i.A,{width:"100%",height:"auto",controls:!0,src:"/img/pc-esm-scripts.mp4"}),"\n",(0,a.jsx)(t.h2,{id:"why-use-esm-scripts",children:"Why use ESM Scripts?"}),"\n",(0,a.jsx)(t.p,{children:"ESM Scripts offer major improvements across the board:"}),"\n",(0,a.jsxs)(t.p,{children:["\ud83d\udca1 ",(0,a.jsx)(t.strong,{children:"Modern JavaScript"})," \u2014 use ",(0,a.jsx)(t.code,{children:"import"}),", ",(0,a.jsx)(t.code,{children:"export"})," class based module syntax",(0,a.jsx)(t.br,{}),"\n","\ud83e\udde0 ",(0,a.jsx)(t.strong,{children:"Smarter Editor"})," \u2014 better auto-complete and inline docs",(0,a.jsx)(t.br,{}),"\n","\ud83e\uddf1 ",(0,a.jsx)(t.strong,{children:"Modular Codebase"})," \u2014 structure large projects cleanly with reusable modules",(0,a.jsx)(t.br,{}),"\n","\u2699\ufe0f ",(0,a.jsx)(t.strong,{children:"No Global Scope Issues"})," \u2014 each script has its own context",(0,a.jsx)(t.br,{}),"\n","\ud83d\udce6 ",(0,a.jsx)(t.strong,{children:"Import Maps"})," \u2014 define aliases and pull in libraries from CDNs",(0,a.jsx)(t.br,{}),"\n","\ud83d\ude80 ",(0,a.jsx)(t.strong,{children:"Optimized for Production"})," \u2014 static imports enable bundling and future support for tree-shaking"]}),"\n",(0,a.jsx)(t.h2,{id:"what-it-looks-like",children:"What it looks like"}),"\n",(0,a.jsx)(t.p,{children:"Instead of attaching scripts to an entity and hoping things load in the right order, you now write self-contained, class-based modules like this:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"import { Script } from 'playcanvas';\n\nexport class Rotator extends Script {\n    static scriptName = 'rotator';\n\n    /**\n     * @attribute\n     * @range [0, 10]\n     */\n    speed = 5;\n\n    update(dt) {\n        this.entity.rotateLocal(0, this.speed * dt, 0);\n    }\n}\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The Editor picks up your ",(0,a.jsx)(t.code,{children:"scriptName"}),", exposes your attributes automatically, and everything behaves as expected \u2014 no magic, no legacy syntax."]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"real-benefits-for-real-projects",children:"Real benefits for real projects"}),"\n",(0,a.jsx)(t.p,{children:"We didn\u2019t just add ESM support because it was shiny. We added it because it solves real problems PlayCanvas developers have told us about for years."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["You get ",(0,a.jsx)(t.strong,{children:"stronger editor feedback"})," while writing code."]}),"\n",(0,a.jsxs)(t.li,{children:["You can ",(0,a.jsx)(t.strong,{children:"reuse logic cleanly"})," across multiple scripts."]}),"\n",(0,a.jsxs)(t.li,{children:["You can ",(0,a.jsx)(t.strong,{children:"share modules between projects"})," or publish them as libraries."]}),"\n",(0,a.jsxs)(t.li,{children:["You\u2019ll write ",(0,a.jsx)(t.strong,{children:"fewer bugs"})," \u2014 and spend less time wrestling with script order or context issues."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Plus, by adopting a standard that the rest of the JS world already embraces, it\u2019s easier than ever to onboard new developers and bring in existing tools and libraries."}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"seamless-integration-without-disruption",children:"Seamless integration without disruption"}),"\n",(0,a.jsxs)(t.p,{children:["Don\u2019t worry \u2014 classic ",(0,a.jsx)(t.code,{children:".js"})," scripts aren\u2019t going anywhere. If you have an existing project using them, everything still works. You can even mix classic and ESM scripts in the same project."]}),"\n",(0,a.jsxs)(t.p,{children:["But going forward, ",(0,a.jsx)(t.strong,{children:"ESM Scripts are the best choice"})," for all new projects \u2014 and we think once you try them, you won\u2019t want to go back."]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"try-it-today",children:"Try It Today"}),"\n",(0,a.jsxs)(t.p,{children:["You can start using ESM Scripts right now \u2014 just create a script with a ",(0,a.jsx)(t.code,{children:".mjs"})," extension and enjoy everything modern JavaScript has to offer."]}),"\n",(0,a.jsxs)(t.p,{children:["Check out the ",(0,a.jsx)(t.a,{href:"https://developer.playcanvas.com/user-manual/scripting/fundamentals/esm-scripts/",children:"user manual"})," for examples, or drop into the ",(0,a.jsx)(t.a,{href:"https://forum.playcanvas.com/",children:"PlayCanvas Forum"})," to share your thoughts."]}),"\n",(0,a.jsx)(t.p,{children:"We can\u2019t wait to see what you build."})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},7170:e=>{e.exports=JSON.parse('{"permalink":"/introducing-esm-scripts-in-playcanvas","editUrl":"https://github.com/playcanvas/blog/tree/main/blog/2025-06-10-esm-scripts-are-here.md","source":"@site/blog/2025-06-10-esm-scripts-are-here.md","title":"Introducing ESM Scripts in PlayCanvas","description":"We\u2019re excited to announce a major step forward for PlayCanvas: ESM Scripts are now supported \u2014 and officially the recommended way to write scripts in your PlayCanvas projects.","date":"2025-06-10T00:00:00.000Z","tags":[{"inline":true,"label":"esm","permalink":"/tags/esm"},{"inline":true,"label":"modules","permalink":"/tags/modules"},{"inline":true,"label":"editor","permalink":"/tags/editor"},{"inline":true,"label":"developer","permalink":"/tags/developer"}],"readingTime":2.75,"hasTruncateMarker":true,"authors":[{"name":"Mark Lundin","title":"Software Engineer","page":{"permalink":"/authors/mark"},"socials":{"x":"https://x.com/mark_lundin","linkedin":"https://www.linkedin.com/in/marklundin2/","github":"https://github.com/marklundin"},"imageURL":"https://github.com/marklundin.png","key":"mark"}],"frontMatter":{"authors":"mark","slug":"introducing-esm-scripts-in-playcanvas","title":"Introducing ESM Scripts in PlayCanvas","tags":["esm","modules","editor","developer"]},"unlisted":false,"nextItem":{"title":"PlayCanvas Adopts SOGS for 20x 3DGS Compression","permalink":"/playcanvas-adopts-sogs-for-20x-3dgs-compression"}}')},14744:e=>{var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)};var r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function a(e,t,r){return e.concat(t).map(function(e){return n(e,r)})}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}(e))}function i(e,t){try{return t in e}catch(r){return!1}}function o(e,t,r){var a={};return r.isMergeableObject(e)&&s(e).forEach(function(t){a[t]=n(e[t],r)}),s(t).forEach(function(s){(function(e,t){return i(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(i(e,s)&&r.isMergeableObject(t[s])?a[s]=function(e,t){if(!t.customMerge)return l;var r=t.customMerge(e);return"function"==typeof r?r:l}(s,r)(e[s],t[s],r):a[s]=n(t[s],r))}),a}function l(e,r,s){(s=s||{}).arrayMerge=s.arrayMerge||a,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=n;var i=Array.isArray(r);return i===Array.isArray(e)?i?s.arrayMerge(e,r,s):o(e,r,s):n(r,s)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,r){return l(e,r,t)},{})};var c=l;e.exports=c},28453:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>o});var n=r(96540);const a={},s=n.createContext(a);function i(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(s.Provider,{value:t},e.children)}},89487:(e,t,r)=>{r.d(t,{A:()=>S});var n=r(96540);const a=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,s=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,i=/\.(m3u8)($|\?)/i,o=/\.(mpd)($|\?)/i,l=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,c=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,u=/vimeo\.com\/(?!progressive_redirect).+/,d=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,p=/open\.spotify\.com\/(\w+)\/(\w+)/i,h=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,m=(e,t)=>{if(Array.isArray(e)){for(const r of e){if("string"==typeof r&&m(r,t))return!0;if(m(r.src,t))return!0}return!1}return t(e)},y={html:e=>m(e,e=>a.test(e)||s.test(e)),hls:e=>m(e,e=>i.test(e)),dash:e=>m(e,e=>o.test(e)),mux:e=>l.test(e),youtube:e=>c.test(e),vimeo:e=>u.test(e)&&!s.test(e)&&!i.test(e),wistia:e=>d.test(e),spotify:e=>p.test(e),twitch:e=>h.test(e)};var f=n.forwardRef((e,t)=>{const r=a.test(`${e.src}`)?"audio":"video";return n.createElement(r,{...e,ref:t},e.children)});var b=[{key:"hls",name:"hls.js",canPlay:y.hls,canEnablePIP:()=>!0,player:(0,n.lazy)(()=>Promise.all([r.e(72606),r.e(32262)]).then(r.bind(r,31833)))},{key:"dash",name:"dash.js",canPlay:y.dash,canEnablePIP:()=>!0,player:(0,n.lazy)(()=>r.e(6395).then(r.bind(r,19380)))},{key:"mux",name:"Mux",canPlay:y.mux,canEnablePIP:()=>!0,player:(0,n.lazy)(()=>Promise.all([r.e(72606),r.e(52723)]).then(r.bind(r,31933)))},{key:"youtube",name:"YouTube",canPlay:y.youtube,player:(0,n.lazy)(()=>r.e(18446).then(r.bind(r,30126)))},{key:"vimeo",name:"Vimeo",canPlay:y.vimeo,player:(0,n.lazy)(()=>r.e(26173).then(r.bind(r,91682)))},{key:"wistia",name:"Wistia",canPlay:y.wistia,canEnablePIP:()=>!0,player:(0,n.lazy)(()=>r.e(99340).then(r.bind(r,89971)))},{key:"spotify",name:"Spotify",canPlay:y.spotify,canEnablePIP:()=>!1,player:(0,n.lazy)(()=>r.e(32771).then(r.bind(r,99422)))},{key:"twitch",name:"Twitch",canPlay:y.twitch,canEnablePIP:()=>!1,player:(0,n.lazy)(()=>r.e(12042).then(r.bind(r,45946)))},{key:"html",name:"html",canPlay:y.html,canEnablePIP:()=>!0,player:f}],g=r(14744);const v={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},w=n.forwardRef((e,t)=>{const{playing:r,pip:a}=e,s=e.activePlayer,i=(0,n.useRef)(null),o=(0,n.useRef)(!0);(0,n.useEffect)(()=>{var t,n;i.current&&(i.current.paused&&!0===r&&i.current.play(),i.current.paused||!1!==r||i.current.pause(),i.current.playbackRate=null!=(t=e.playbackRate)?t:1,i.current.volume=null!=(n=e.volume)?n:1)}),(0,n.useEffect)(()=>{var e,t,r,n,s;if(i.current&&globalThis.document){if(a&&!document.pictureInPictureElement)try{null==(t=(e=i.current).requestPictureInPicture)||t.call(e)}catch(o){}if(!a&&document.pictureInPictureElement)try{null==(n=(r=i.current).exitPictureInPicture)||n.call(r),null==(s=document.exitPictureInPicture)||s.call(document)}catch(o){}}},[a]);if(!s)return null;const l={};for(const n in e)n.startsWith("on")&&(l[n]=e[n]);return n.createElement(s,{...l,style:e.style,className:e.className,slot:e.slot,ref:(0,n.useCallback)(e=>{i.current=e,"function"==typeof t?t(e):null!==t&&(t.current=e)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:t=>{var r,n;o.current=!0,null==(r=e.onReady)||r.call(e),null==(n=e.onLoadStart)||n.call(e,t)},onPlay:t=>{var r,n;o.current&&(o.current=!1,null==(r=e.onStart)||r.call(e,t)),null==(n=e.onPlay)||n.call(e,t)}},e.children)});w.displayName="Player";var x=w;const j=(0,n.lazy)(()=>r.e(36353).then(r.bind(r,21924))),P=[],k=({children:e})=>e;var S=((e,t)=>{const r=n.forwardRef(({children:r,...a},s)=>{const i=g(v,a),{src:o,slot:l,className:c,style:u,width:d,height:p,fallback:h,wrapper:m}=i,[y,f]=(0,n.useState)(!!i.light);(0,n.useEffect)(()=>{i.light?f(!0):f(!1)},[i.light]);const b=e=>{var t;f(!1),null==(t=i.onClickPreview)||t.call(i,e)},w=null==m?k:m,S=!1===h?k:n.Suspense;return n.createElement(w,{slot:l,className:c,style:{width:d,height:p,...u}},n.createElement(S,{fallback:h},y?(e=>{if(!e)return null;const{light:t,playIcon:r,previewTabIndex:a,oEmbedUrl:s,previewAriaLabel:o}=i;return n.createElement(j,{src:e,light:t,playIcon:r,previewTabIndex:a,previewAriaLabel:o,oEmbedUrl:s,onClickPreview:b})})(o):(a=>{var o,u;const d=(r=>{for(const t of[...P,...e])if(r&&t.canPlay(r))return t;return t||null})(a);if(!d)return null;const{style:p,width:h,height:m,wrapper:y}=i,f=null==(o=i.config)?void 0:o[d.key];return n.createElement(x,{...i,ref:s,activePlayer:null!=(u=d.player)?u:d,slot:y?void 0:l,className:y?void 0:c,style:y?{display:"block",width:"100%",height:"100%"}:{display:"block",width:h,height:m,...p},config:f},r)})(o)))});return r.displayName="ReactPlayer",r.addCustomPlayer=e=>{P.push(e)},r.removeCustomPlayers=()=>{P.length=0},r.canPlay=t=>{if(t)for(const r of[...P,...e])if(r.canPlay(t))return!0;return!1},r.canEnablePIP=t=>{var r;if(t)for(const n of[...P,...e])if(n.canPlay(t)&&(null==(r=n.canEnablePIP)?void 0:r.call(n)))return!0;return!1},r})(b,b[b.length-1])}}]);