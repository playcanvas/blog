"use strict";(self.webpackChunk_playcanvas_blog=self.webpackChunk_playcanvas_blog||[]).push([[5456],{52691:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var t=n(74848),s=n(28453);const r={authors:"will",slug:"playcanvas-versus-unreal-webgl",title:"PlayCanvas versus Unreal WebGL",tags:["unreal","performance"]},i=void 0,l={permalink:"/playcanvas-versus-unreal-webgl",editUrl:"https://github.com/playcanvas/blog/tree/main/blog/2016-08-15-playcanvas-versus-unreal-webgl.md",source:"@site/blog/2016-08-15-playcanvas-versus-unreal-webgl.md",title:"PlayCanvas versus Unreal WebGL",description:"Our previous article comparing PlayCanvas with Unity's WebGL exporter certainly got folks talking. One of the questions that came up in the aftermath was \"OK, but what about Unreal's WebGL exporter?\". Unreal, like Unity, relies on Emscripten to port the native codebase to JavaScript. So it would be reasonable to expect Unreal to suffer from the same issues as Unity: large download sizes, long load times and poor runtime performance.",date:"2016-08-15T00:00:00.000Z",tags:[{label:"unreal",permalink:"/tags/unreal"},{label:"performance",permalink:"/tags/performance"}],readingTime:4.6,hasTruncateMarker:!1,authors:[{name:"Will Eastcott",title:"CEO",url:"https://twitter.com/willeastcott",imageURL:"https://pbs.twimg.com/profile_images/2635146631/edcd8b6dc4a34625770095941519ca8a_400x400.png",key:"will"}],frontMatter:{authors:"will",slug:"playcanvas-versus-unreal-webgl",title:"PlayCanvas versus Unreal WebGL",tags:["unreal","performance"]},unlisted:!1,prevItem:{title:"PlayCanvas REST API",permalink:"/playcanvas-rest-api"},nextItem:{title:"PlayCanvas versus Unity WebGL",permalink:"/playcanvas-versus-unity-webgl"}},o={authorsImageUrls:[void 0]},c=[{value:"Download Size",id:"download-size",level:3},{value:"Load Time",id:"load-time",level:3},{value:"Runtime Performance",id:"runtime-performance",level:3},{value:"Conclusion",id:"conclusion",level:3}];function h(e){const a={a:"a",blockquote:"blockquote",em:"em",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.p,{children:["Our ",(0,t.jsx)(a.a,{href:"https://blog.playcanvas.com/playcanvas-versus-unity-webgl/",children:"previous article"})," comparing PlayCanvas with Unity's WebGL exporter certainly got folks talking. One of the questions that came up in the aftermath was \"OK, but what about Unreal's WebGL exporter?\". Unreal, like Unity, relies on Emscripten to port the native codebase to JavaScript. So it would be reasonable to expect Unreal to suffer from the same issues as Unity: large download sizes, long load times and poor runtime performance."]}),"\n",(0,t.jsx)(a.p,{children:"We could do the same experiments as before with the textured cube, but let's try to make a more real-world comparison. Flappy Bird clones have been made in both Unreal and PlayCanvas. Let's take the Epic-authored Tappy Chicken and see how it fares against the PlayCanvas-powered Flappy Bird. Here's the \xa0(playable) PlayCanvas game:"}),"\n",(0,t.jsx)("div",{className:"iframe-container",children:(0,t.jsx)("iframe",{loading:"lazy",src:"https://playcanv.as/b/ONc0qGvZ/",title:"360 lookaround camera",webkitallowfullscreen:"true",mozallowfullscreen:"true",allow:"autoplay",allowfullscreen:"true",allowvr:"",scrolling:"no",frameborder:"0"})}),"\n",(0,t.jsxs)(a.p,{children:["Unfortunately, I can't embed Tappy Chicken because Epic have restricted it to desktop browsers. So ",(0,t.jsx)(a.a,{href:"https://www.unrealengine.com/html5/",children:"here's a link"})," to it, along with an animated GIF:"]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(77909).A+"",children:(0,t.jsx)(a.img,{alt:"tappychicken",src:n(78515).A+"",width:"375",height:"500"})})}),"\n",(0,t.jsxs)(a.p,{children:["So before we begin, there's an important point to make. ",(0,t.jsx)(a.em,{children:"They are not the same game and they do exhibit certain differences"}),". Tappy Chicken uses different textures, has parallax, uses particles and so on.\xa0But in essence, they are remarkably similar and worthy of a comparison, despite not being pixel perfect clones of each other. It's up to you, dear reader, to decide if the differences in the games account for the results of the analysis presented below."]}),"\n",(0,t.jsx)(a.p,{children:"As before, we will look at three key metrics: download size, load time and runtime performance."}),"\n",(0,t.jsx)(a.h3,{id:"download-size",children:"Download Size"}),"\n",(0,t.jsx)(a.p,{children:"To check the download size of each app, we disabled the cache in Chrome Dev Tools and recorded the total transfer:"}),"\n",(0,t.jsxs)(a.table,{children:[(0,t.jsx)(a.thead,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.th,{children:"Tappy Chicken (Unreal)"}),(0,t.jsx)(a.th,{children:"Flappy Bird (PlayCanvas)"})]})}),(0,t.jsx)(a.tbody,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:"10.0MB"}),(0,t.jsx)(a.td,{children:"0.22MB"})]})})]}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.strong,{children:"Epic's game is over 47 times larger than the PlayCanvas game."})," Again, we see an Emscripten dependent engine struggle with download size. Just ",(0,t.jsx)(a.a,{href:"https://cdn2.unrealengine.com/TappyChicken/gameFiles_1408053316/UE4Game-HTML5-Shipping.js.jgz",children:"the JavaScript of Tappy Chicken"})," accounts for 7.3MB of the entire 10MB payload, and that is the GZIPped size. Uncompressed, it is over 36MB of JavaScript. PlayCanvas' hand-written, 'JavaScript-first' approach wins out here, with a tiny 147KB footprint (615KB uncompressed) for the entire engine."]}),"\n",(0,t.jsx)(a.h3,{id:"load-time",children:"Load Time"}),"\n",(0,t.jsx)(a.p,{children:"Unfortunately, Epic prevents Tappy Chicken from running on mobile so we'll just test load times on desktop. For the test, we'll use a Core i7-powered Win10 machine on a 50Mb/s connection to the net. The browser cache has been disabled."}),"\n",(0,t.jsxs)(a.table,{children:[(0,t.jsx)(a.thead,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.th,{children:"Browser"}),(0,t.jsx)(a.th,{children:"Tappy Chicken (Unreal)"}),(0,t.jsx)(a.th,{children:"Flappy Bird (PlayCanvas)"})]})}),(0,t.jsxs)(a.tbody,{children:[(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:"Chrome 52"}),(0,t.jsx)(a.td,{children:"15.8s"}),(0,t.jsx)(a.td,{children:"0.9s"})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:"Firefox 48"}),(0,t.jsx)(a.td,{children:"11.0s"}),(0,t.jsx)(a.td,{children:"1.4s"})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:"Edge 14"}),(0,t.jsx)(a.td,{children:"23.6s"}),(0,t.jsx)(a.td,{children:"1.1s"})]})]})]}),"\n",(0,t.jsx)(a.p,{children:"The PlayCanvas game was also run on a number of mobile devices and always runs at 60Hz and loaded in under 2 seconds."}),"\n",(0,t.jsx)(a.p,{children:"Things to notice:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Chrome loads the PlayCanvas game 17.6 times faster than the Unreal game."})," Other browsers show impressive multiples too."]}),"\n",(0,t.jsx)(a.li,{children:"Firefox loads the asm.js-based Unreal runtime the fastest. Since Emscripten is a Mozilla technology and Firefox is heavily optimized for asm.js code, this is not a great surprise."}),"\n",(0,t.jsx)(a.li,{children:"Load times appear to depend on more than just loading the game files. Preprocessing 36MB of JavaScript also contributes to the slow Unreal load times."}),"\n"]}),"\n",(0,t.jsx)(a.h3,{id:"runtime-performance",children:"Runtime Performance"}),"\n",(0,t.jsx)(a.p,{children:"To analyze runtime performance, let's compare captures of the two games using the Timeline panel in Chrome Dev Tools. Here's a capture for the PlayCanvas-powered Flappy Bird showing a frame executed in 0.57ms:"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(2955).A+"",children:(0,t.jsx)(a.img,{alt:"flappy_timeline",src:n(13257).A+"",width:"700",height:"335"})})}),"\n",(0,t.jsx)(a.p,{children:"And here's a capture for the Unreal-powered Tappy Chicken with a frame executed in 5.0ms:"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(92579).A+"",children:(0,t.jsx)(a.img,{alt:"tappy_timeline",src:n(64985).A+"",width:"700",height:"396"})})}),"\n",(0,t.jsx)(a.p,{children:"In each capture, a typical frame has been selected. Not the fastest, not the slowest. Just an 'average' frame. Note that both captures are showing a frame at the same timeline scale."}),"\n",(0,t.jsx)(a.p,{children:"Things to notice:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"CPU load in the Unreal game is typically around 8x greater than for the PlayCanvas game."}),"\xa0Taking\xa0the 'Composite Layers' step of the browser into account (green bar in the Timeline captures), the multiple is closer to 6x. So although both games generally lock to 60Hz on the test hardware, the PlayCanvas game can process a frame well within a millisecond whereas the Unreal game is clearly stressing the CPU. On lower end hardware, the Unreal game would become CPU bound."]}),"\n",(0,t.jsx)(a.li,{children:"CPU load is much more variable in the Unreal game and spikes regularly. Without understanding the internals of the Unreal engine, it is hard to explain this. But the result is sporadic\xa0frame drops."}),"\n"]}),"\n",(0,t.jsx)(a.h3,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(a.p,{children:"To summarize:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.strong,{children:"Epic's game is over 47 times larger than the PlayCanvas game."})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.strong,{children:"Chrome loads the PlayCanvas game 17.6 times faster than the Unreal game."})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.strong,{children:"CPU load in the Unreal game is typically around 8x greater than for the PlayCanvas game."})}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"To be fair, Epic say the following in their documentation:"}),"\n",(0,t.jsxs)(a.blockquote,{children:["\n",(0,t.jsx)(a.p,{children:"The HTML5 pipeline is currently experimental. Some projects may not run properly when built for the HTML5 platform. Expect some rough edges."}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"But we clearly see here that Unreal suffers similar problems to Unity's WebGL exporter. Export sizes are huge, load times are long and runtime performance is poor when compared to a 'WebGL-first' engine like PlayCanvas."}),"\n",(0,t.jsxs)(a.p,{children:["To learn how PlayCanvas built an engine so optimized for the browser, head over to ",(0,t.jsx)(a.a,{href:"https://github.com/playcanvas/engine",children:"GitHub"})," to explore the open sourced runtime. And if you want to start building with PlayCanvas today, sign up for free on ",(0,t.jsx)(a.a,{href:"https://playcanvas.com",children:"playcanvas.com"}),". To check out the Flappy Bird project, ",(0,t.jsx)(a.a,{href:"https://playcanvas.com/project/375389/overview/flappy-bird",children:"click here"}),"."]})]})}function d(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},2955:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/files/flappy_timeline-2efea17f3cca49becf6c7e84d49cca3e.png"},92579:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/files/tappy_timeline-1-f6f252ec5fbcc0b72d8a593df66ed6f5.png"},77909:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/files/tappychicken-984f89bf4e098ed997810f00ede08b2e.gif"},13257:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/flappy_timeline-2efea17f3cca49becf6c7e84d49cca3e.png"},64985:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/tappy_timeline-1-f6f252ec5fbcc0b72d8a593df66ed6f5.png"},78515:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/tappychicken-984f89bf4e098ed997810f00ede08b2e.gif"},28453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>l});var t=n(96540);const s={},r=t.createContext(s);function i(e){const a=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);