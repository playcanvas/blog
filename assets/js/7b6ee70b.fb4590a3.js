"use strict";(self.webpackChunk_playcanvas_blog=self.webpackChunk_playcanvas_blog||[]).push([[9305],{7170:e=>{e.exports=JSON.parse('{"permalink":"/introducing-esm-scripts-in-playcanvas","editUrl":"https://github.com/playcanvas/blog/tree/main/blog/2025-06-10-esm-scripts-are-here.md","source":"@site/blog/2025-06-10-esm-scripts-are-here.md","title":"Introducing ESM Scripts in PlayCanvas","description":"We\u2019re excited to announce a major step forward for PlayCanvas: ESM Scripts are now supported \u2014 and officially the recommended way to write scripts in your PlayCanvas projects.","date":"2025-06-10T00:00:00.000Z","tags":[{"inline":true,"label":"esm","permalink":"/tags/esm"},{"inline":true,"label":"modules","permalink":"/tags/modules"},{"inline":true,"label":"editor","permalink":"/tags/editor"},{"inline":true,"label":"developer","permalink":"/tags/developer"}],"readingTime":2.75,"hasTruncateMarker":true,"authors":[{"name":"Mark Lundin","title":"Software Engineer","page":{"permalink":"/authors/mark"},"socials":{"x":"https://x.com/mark_lundin","linkedin":"https://www.linkedin.com/in/marklundin2/","github":"https://github.com/marklundin"},"imageURL":"https://github.com/marklundin.png","key":"mark"}],"frontMatter":{"authors":"mark","slug":"introducing-esm-scripts-in-playcanvas","title":"Introducing ESM Scripts in PlayCanvas","tags":["esm","modules","editor","developer"]},"unlisted":false,"prevItem":{"title":"Introducing SplatTransform: The Ultimate CLI Tool for 3D Gaussian Splats","permalink":"/introducing-splat-transform-cli-tool"},"nextItem":{"title":"PlayCanvas Adopts SOGS for 20x 3DGS Compression","permalink":"/playcanvas-adopts-sogs-for-20x-3dgs-compression"}}')},7701:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>n,toc:()=>u});var n=r(7170),a=r(74848),o=r(28453),l=r(89487);const i={authors:"mark",slug:"introducing-esm-scripts-in-playcanvas",title:"Introducing ESM Scripts in PlayCanvas",tags:["esm","modules","editor","developer"]},s=void 0,c={authorsImageUrls:[void 0]},u=[];function p(e){const t={a:"a",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:(0,a.jsxs)(t.strong,{children:["We\u2019re excited to announce a major step forward for PlayCanvas: ",(0,a.jsx)(t.strong,{children:"ESM Scripts are now supported"})," \u2014 and officially the recommended way to write scripts in your PlayCanvas projects."]})}),"\n",(0,a.jsxs)(t.p,{children:["Back in 2016, we introduced what we now call ",(0,a.jsx)(t.a,{href:"https://blog.playcanvas.com/playcanvas-scripts-2-0/",children:"Classic Scripts"}),". At the time, this represented the state of the art in JavaScript. But things have evolved rapidly since then, and developers today expect modern tooling, clearer patterns, and better integration with the broader JavaScript ecosystem."]}),"\n",(0,a.jsx)(t.p,{children:"If you\u2019ve ever struggled with managing classic scripts, wondered why your auto-complete didn\u2019t work, or wished you could reuse code across projects more easily \u2014 this is for you."}),"\n",(0,a.jsx)(t.p,{children:"ESM (ECMAScript Modules) brings modern JavaScript development to the heart of PlayCanvas. It\u2019s faster to get started, easier to scale your project, and way more fun to work with. No more hidden globals. No more messy script loading order. Just well-structured, maintainable, and modular code \u2014 exactly how modern web development should be."}),"\n",(0,a.jsx)(l.A,{width:"100%",height:"auto",controls:!0,src:"/img/pc-esm-scripts.mp4"})]})}function m(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},14744:e=>{var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)};var r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function a(e,t,r){return e.concat(t).map(function(e){return n(e,r)})}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}(e))}function l(e,t){try{return t in e}catch(r){return!1}}function i(e,t,r){var a={};return r.isMergeableObject(e)&&o(e).forEach(function(t){a[t]=n(e[t],r)}),o(t).forEach(function(o){(function(e,t){return l(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(l(e,o)&&r.isMergeableObject(t[o])?a[o]=function(e,t){if(!t.customMerge)return s;var r=t.customMerge(e);return"function"==typeof r?r:s}(o,r)(e[o],t[o],r):a[o]=n(t[o],r))}),a}function s(e,r,o){(o=o||{}).arrayMerge=o.arrayMerge||a,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=n;var l=Array.isArray(r);return l===Array.isArray(e)?l?o.arrayMerge(e,r,o):i(e,r,o):n(r,o)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,r){return s(e,r,t)},{})};var c=s;e.exports=c},28453:(e,t,r)=>{r.d(t,{R:()=>l,x:()=>i});var n=r(96540);const a={},o=n.createContext(a);function l(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),n.createElement(o.Provider,{value:t},e.children)}},89487:(e,t,r)=>{r.d(t,{A:()=>S});var n=r(96540);const a=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,o=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,l=/\.(m3u8)($|\?)/i,i=/\.(mpd)($|\?)/i,s=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,c=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,u=/vimeo\.com\/(?!progressive_redirect).+/,p=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,m=/open\.spotify\.com\/(\w+)\/(\w+)/i,d=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,y=(e,t)=>{if(Array.isArray(e)){for(const r of e){if("string"==typeof r&&y(r,t))return!0;if(y(r.src,t))return!0}return!1}return t(e)},h={html:e=>y(e,e=>a.test(e)||o.test(e)),hls:e=>y(e,e=>l.test(e)),dash:e=>y(e,e=>i.test(e)),mux:e=>s.test(e),youtube:e=>c.test(e),vimeo:e=>u.test(e)&&!o.test(e)&&!l.test(e),wistia:e=>p.test(e),spotify:e=>m.test(e),twitch:e=>d.test(e)};var f=n.forwardRef((e,t)=>{const r=a.test(`${e.src}`)?"audio":"video";return n.createElement(r,{...e,ref:t},e.children)});var b=[{key:"hls",name:"hls.js",canPlay:h.hls,canEnablePIP:()=>!0,player:(0,n.lazy)(()=>Promise.all([r.e(72606),r.e(32262)]).then(r.bind(r,31833)))},{key:"dash",name:"dash.js",canPlay:h.dash,canEnablePIP:()=>!0,player:(0,n.lazy)(()=>r.e(6395).then(r.bind(r,19380)))},{key:"mux",name:"Mux",canPlay:h.mux,canEnablePIP:()=>!0,player:(0,n.lazy)(()=>Promise.all([r.e(72606),r.e(52723)]).then(r.bind(r,31933)))},{key:"youtube",name:"YouTube",canPlay:h.youtube,player:(0,n.lazy)(()=>r.e(18446).then(r.bind(r,30126)))},{key:"vimeo",name:"Vimeo",canPlay:h.vimeo,player:(0,n.lazy)(()=>r.e(26173).then(r.bind(r,91682)))},{key:"wistia",name:"Wistia",canPlay:h.wistia,canEnablePIP:()=>!0,player:(0,n.lazy)(()=>r.e(99340).then(r.bind(r,89971)))},{key:"spotify",name:"Spotify",canPlay:h.spotify,canEnablePIP:()=>!1,player:(0,n.lazy)(()=>r.e(32771).then(r.bind(r,99422)))},{key:"twitch",name:"Twitch",canPlay:h.twitch,canEnablePIP:()=>!1,player:(0,n.lazy)(()=>r.e(12042).then(r.bind(r,45946)))},{key:"html",name:"html",canPlay:h.html,canEnablePIP:()=>!0,player:f}],g=r(14744);const v={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},w=n.forwardRef((e,t)=>{const{playing:r,pip:a}=e,o=e.activePlayer,l=(0,n.useRef)(null),i=(0,n.useRef)(!0);(0,n.useEffect)(()=>{var t,n;l.current&&(l.current.paused&&!0===r&&l.current.play(),l.current.paused||!1!==r||l.current.pause(),l.current.playbackRate=null!=(t=e.playbackRate)?t:1,l.current.volume=null!=(n=e.volume)?n:1)}),(0,n.useEffect)(()=>{var e,t,r,n,o;if(l.current&&globalThis.document){if(a&&!document.pictureInPictureElement)try{null==(t=(e=l.current).requestPictureInPicture)||t.call(e)}catch(i){}if(!a&&document.pictureInPictureElement)try{null==(n=(r=l.current).exitPictureInPicture)||n.call(r),null==(o=document.exitPictureInPicture)||o.call(document)}catch(i){}}},[a]);if(!o)return null;const s={};for(const n in e)n.startsWith("on")&&(s[n]=e[n]);return n.createElement(o,{...s,style:e.style,className:e.className,slot:e.slot,ref:(0,n.useCallback)(e=>{l.current=e,"function"==typeof t?t(e):null!==t&&(t.current=e)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:t=>{var r,n;i.current=!0,null==(r=e.onReady)||r.call(e),null==(n=e.onLoadStart)||n.call(e,t)},onPlay:t=>{var r,n;i.current&&(i.current=!1,null==(r=e.onStart)||r.call(e,t)),null==(n=e.onPlay)||n.call(e,t)}},e.children)});w.displayName="Player";var P=w;const k=(0,n.lazy)(()=>r.e(36353).then(r.bind(r,21924))),x=[],E=({children:e})=>e;var S=((e,t)=>{const r=n.forwardRef(({children:r,...a},o)=>{const l=g(v,a),{src:i,slot:s,className:c,style:u,width:p,height:m,fallback:d,wrapper:y}=l,[h,f]=(0,n.useState)(!!l.light);(0,n.useEffect)(()=>{l.light?f(!0):f(!1)},[l.light]);const b=e=>{var t;f(!1),null==(t=l.onClickPreview)||t.call(l,e)},w=null==y?E:y,S=!1===d?E:n.Suspense;return n.createElement(w,{slot:s,className:c,style:{width:p,height:m,...u}},n.createElement(S,{fallback:d},h?(e=>{if(!e)return null;const{light:t,playIcon:r,previewTabIndex:a,oEmbedUrl:o,previewAriaLabel:i}=l;return n.createElement(k,{src:e,light:t,playIcon:r,previewTabIndex:a,previewAriaLabel:i,oEmbedUrl:o,onClickPreview:b})})(i):(a=>{var i,u;const p=(r=>{for(const t of[...x,...e])if(r&&t.canPlay(r))return t;return t||null})(a);if(!p)return null;const{style:m,width:d,height:y,wrapper:h}=l,f=null==(i=l.config)?void 0:i[p.key];return n.createElement(P,{...l,ref:o,activePlayer:null!=(u=p.player)?u:p,slot:h?void 0:s,className:h?void 0:c,style:h?{display:"block",width:"100%",height:"100%"}:{display:"block",width:d,height:y,...m},config:f},r)})(i)))});return r.displayName="ReactPlayer",r.addCustomPlayer=e=>{x.push(e)},r.removeCustomPlayers=()=>{x.length=0},r.canPlay=t=>{if(t)for(const r of[...x,...e])if(r.canPlay(t))return!0;return!1},r.canEnablePIP=t=>{var r;if(t)for(const n of[...x,...e])if(n.canPlay(t)&&(null==(r=n.canEnablePIP)?void 0:r.call(n)))return!0;return!1},r})(b,b[b.length-1])}}]);