"use strict";(self.webpackChunk_playcanvas_blog=self.webpackChunk_playcanvas_blog||[]).push([[27210],{28453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>i});var t=a(96540);const c={},s=t.createContext(c);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),t.createElement(s.Provider,{value:n},e.children)}},57932:e=>{e.exports=JSON.parse('{"permalink":"/new-math-api-a-transition-guide","editUrl":"https://github.com/playcanvas/blog/tree/main/blog/2014-01-16-new-math-api-a-transition-guide.md","source":"@site/blog/2014-01-16-new-math-api-a-transition-guide.md","title":"New Math API: A Transition Guide","description":"Yesterday, we announced an imminent update to the PlayCanvas Math API. It\'s a rare event that we introduce breaking changes and we only do it because we\'re certain it\'s going to help you be much more productive. So what have we changed?","date":"2014-01-16T00:00:00.000Z","tags":[{"inline":true,"label":"engine","permalink":"/tags/engine"}],"readingTime":2.86,"hasTruncateMarker":true,"authors":[{"name":"Will Eastcott","title":"CEO","description":"Will Eastcott is an entrepreneur and veteran technologist of the games industry with experience at EA, Sony, and Activision. He has been credited in many AAA game franchises such as GTA, Call of Duty and Max Payne. He is best known for co-founding PlayCanvas, the web graphics creation platform. As CEO, he has championed the company\'s mission to make graphical web app development more accessible and collaborative through open-source technologies and cloud-based tools.","page":{"permalink":"/authors/will"},"socials":{"x":"https://x.com/willeastcott","linkedin":"https://www.linkedin.com/in/willeastcott/","github":"https://github.com/willeastcott"},"imageURL":"https://github.com/willeastcott.png","key":"will"}],"frontMatter":{"authors":"will","slug":"new-math-api-a-transition-guide","title":"New Math API: A Transition Guide","tags":["engine"]},"unlisted":false,"prevItem":{"title":"PlayCanvas @ SXSW","permalink":"/playcanvas-sxsw"},"nextItem":{"title":"Incoming Breaking Changes - New Maths API","permalink":"/new-maths-api"}}')},92077:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>l});var t=a(57932),c=a(74848),s=a(28453);const r={authors:"will",slug:"new-math-api-a-transition-guide",title:"New Math API: A Transition Guide",tags:["engine"]},i=void 0,o={authorsImageUrls:[void 0]},l=[{value:"Accessing Math Object Elements",id:"accessing-math-object-elements",level:3},{value:"Creating Math Objects",id:"creating-math-objects",level:3},{value:"Math Object Constants",id:"math-object-constants",level:3},{value:"API Reference Pages",id:"api-reference-pages",level:3},{value:"Unrelated Changes",id:"unrelated-changes",level:3}];function h(e){const n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.p,{children:"Yesterday, we announced an imminent update to the PlayCanvas Math API. It's a rare event that we introduce breaking changes and we only do it because we're certain it's going to help you be much more productive. So what have we changed?"}),"\n",(0,c.jsx)(n.p,{children:"Previously, we had a Math API which consisted of static functions that operated on arrays (JavaScript typed arrays, to be specific). It was fast - very fast - but this came at the expense of a developer-friendly interface. Therefore, we have written a brand new Math API that is object-oriented and far crisper to write against. Here's an example of how things were:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"// Generate a vector from a to b rescaled to be 10 units long\nvar a = pc.math.vec3.create(1, 2, 3);\nvar b = pc.math.vec3.create(4, 5, 6);\nvar result = pc.math.vec3.create();\npc.math.vec3.sub(b, a, result);\npc.math.vec3.normalize(result, result);\npc.math.vec3.scale(result, 10, result);\n"})}),"\n",(0,c.jsx)(n.p,{children:"A bit verbose! Here's how things look now:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"// Generate a vector from a to b rescaled to be 10 units long\nvar a = new pc.Vec3(1, 2, 3);\nvar b = new pc.Vec3(4, 5, 6);\nvar result = new pc.Vec3();\nresult.sub2(b, a).normalize().scale(10);\n"})}),"\n",(0,c.jsx)(n.p,{children:"Much better! As you can see, you can now chain math functions together to apply lots of operations in order."}),"\n",(0,c.jsx)(n.p,{children:"So what if you've already written PlayCanvas script code against the old API? How do you upgrade it? Here's a brief guide."}),"\n",(0,c.jsx)(n.h3,{id:"accessing-math-object-elements",children:"Accessing Math Object Elements"}),"\n",(0,c.jsx)(n.p,{children:"The old way:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"var x = vector[0];\nvar y = vector[1];\nvar z = vector[2];\n"})}),"\n",(0,c.jsx)(n.p,{children:"The new way:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"var x = vector.x;\nvar y = vector.y;\nvar z = vector.z;\n"})}),"\n",(0,c.jsx)(n.h3,{id:"creating-math-objects",children:"Creating Math Objects"}),"\n",(0,c.jsx)(n.p,{children:"The old way:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"var v2 = pc.math.vec2.create(1, 2);\nvar v3 = pc.math.vec3.create(1, 2, 3);\nvar v4 = pc.math.vec4.create(1, 2, 3, 4);\nvar m4 = pc.math.mat4.create();\nvar q1 = pc.math.quat.create(0, 0, 0, 1);\n"})}),"\n",(0,c.jsx)(n.p,{children:"The new way:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"var v2 = new pc.Vec2(1, 2);\nvar v3 = new pc.Vec3(1, 2, 3);\nvar v4 = new pc.Vec4(1, 2, 3, 4);\nvar m4 = new pc.Mat4();\nvar q1 = new pc.Quat(0, 0, 0, 1);\n"})}),"\n",(0,c.jsx)(n.h3,{id:"math-object-constants",children:"Math Object Constants"}),"\n",(0,c.jsx)(n.p,{children:"The old way:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"var zeroVec = pc.math.vec3.zero;\n"})}),"\n",(0,c.jsx)(n.p,{children:"The new way:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"var zeroVec = pc.Vec3.ZERO;\n"})}),"\n",(0,c.jsx)(n.h3,{id:"api-reference-pages",children:"API Reference Pages"}),"\n",(0,c.jsxs)(n.p,{children:["We strongly urge you to check out the API reference pages for the new API. We've worked hard to ensure every function has been lovingly documented (including sample code). If you spot any mistakes, have feedback or need any help whatsoever, ",(0,c.jsx)(n.a,{href:"https://forum.playcanvas.com",children:"do let us know"}),"!"]}),"\n",(0,c.jsx)(n.p,{children:"Reference pages can be found here:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Vec2.html",children:(0,c.jsx)(n.code,{children:"pc.Vec2"})})," - A 2-dimensional vector"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Vec3.html",children:(0,c.jsx)(n.code,{children:"pc.Vec3"})})," - A 3-dimensional vector"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Vec4.html",children:(0,c.jsx)(n.code,{children:"pc.Vec4"})})," - A 4-dimensional vector"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Mat4.html",children:(0,c.jsx)(n.code,{children:"pc.Mat4"})})," - A 4x4 matrix"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Quat.html",children:(0,c.jsx)(n.code,{children:"pc.Quat"})})," - A quaternion"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"unrelated-changes",children:"Unrelated Changes"}),"\n",(0,c.jsx)(n.p,{children:"Since we have made such sweeping API changes, we have also taken the opportunity to remove some deprecated functions. The following are no longer in the engine:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"pc.fw.RigidBodyComponent#get/setLinearVelocity"})," - use ",(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/RigidBodyComponent.html#linearvelocity",children:(0,c.jsx)(n.code,{children:"linearVelocity"})})," property"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"pc.fw.RigidBodyComponent#get/setAngularVelocity"})," - use ",(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/RigidBodyComponent.html#angularvelocity",children:(0,c.jsx)(n.code,{children:"angularVelocity"})})," property"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"pc.fw.RigidBodyComponent#get/setLinearFactor"})," - use ",(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/RigidBodyComponent.html#linearfactor",children:(0,c.jsx)(n.code,{children:"linearFactor"})})," property"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"pc.fw.RigidBodyComponent#get/setAngularFactor"})," - use ",(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/RigidBodyComponent.html#angularfactor",children:(0,c.jsx)(n.code,{children:"angularFactor"})})," property"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"pc.scene.Scene#get/setGlobalAmbient"})," - use ",(0,c.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Scene.html#ambientlight",children:(0,c.jsx)(n.code,{children:"ambientLight"})})," property"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"We hope you like the new interface!"})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}}}]);